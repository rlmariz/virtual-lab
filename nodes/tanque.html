<script type="text/html" data-template-name="tanque">

    <div class="form-row">
        <label for="node-input-name" style="width:120px"><i class="fa fa-tag"></i>Name</label>
        <input type="text" id="node-input-name" placeholder="Name" style="width:60%;">
    </div>  

    <div class="form-row">
        <label for="node-input-area" style="width:120px;"><font size=+1>Area<sub>tank</sub></font></label>
        <input type="number" id="node-input-area" placeholder="Area of tank" style="width:60%;">
    </div>

    <div class="form-row">
        <label for="node-input-valveK" style="width:120px;"><font size=+1>K<sub>valve</sub></font></label>
        <input type="number" id="node-input-valveK" placeholder="Constant K of valve" style="width:60%;">
    </div>

    <div class="form-row">
        <label for="node-input-valveOpen" style="width:120px;"><font size=+1>Valve<sub>opening</sub></font></label>
        <input type="number" id="node-input-valveOpen" placeholder="Start opening value of valve [0-100]" style="width:60%;">
    </div>

    <div class="form-row">
        <label for="node-input-maxLevel" style="width:120px;"><font size=+1>Max<sub>level</sub></font></label>
        <input type="number" id="node-input-maxLevel" placeholder="Max level of tank" style="width:60%;">
    </div>

    <div class="form-row">
        <label for="node-input-startLevel" style="width:120px;"><font size=+1>Level<sub>tank</sub></font></label>
        <input type="number" id="node-input-startLevel" placeholder="Start level of tank" style="width:60%;">
    </div>

    <div class="form-row">
        <label for="node-input-integrationInterval" style="width:120px;"><font size=+1>Interval<sub>int</sub></font></label>
        <input type="text" id="node-input-integrationInterval" placeholder="Ingration interval" style="width:60%;">
    </div>    

    <div class="form-row">
        <label for="node-input-intervalUpdate" style="width:120px;"><font size=+1>Interval<sub>update</sub></font></label>
        <input type="number" id="node-input-intervalUpdate" placeholder="interval update output ms" style="width:60%;">
    </div>        
    
    <div class="form-row">
        <label for="node-input-modbusHost" style="width:120px;"><font size=+1>Modbus</font></label>
        <input type="text" id="node-input-modbusHost" placeholder="Host ip/name" style="width:40%;">
        <input type="number" id="node-input-modbusPort" placeholder="Port" style="width:8%;">
        <input type="number" id="node-input-modbusRegister" placeholder="Register" style="width:11%;">
    </div>            
    
</script>

<script type="text/html" data-help-name="sensor">
    <p>Simulação de um tanque com uma vazão de entrada e uma vazão de saída.</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('tanque',{
        category: 'virtual_lab',
        defaults: {
            name: {value:""},
            valveK: {value:1,required:true},
            valveOpen: {value:100,required:true,validate:RED.validators.number()},
            area: {value:0,required:true,validate:RED.validators.number()},
            maxLevel: {value:"",required:true,validate:RED.validators.number()},
            startLevel: {value:"",required:true,validate:RED.validators.number()},
            modbusHost: {value:"",required:false},
            modbusPort: {value:"502",required:true,validate:RED.validators.number()},
            modbusRegister: {value:"",required:true,validate:RED.validators.number()},
            integrationInterval: {value:"0.2",required:true,validate:RED.validators.number()},
            intervalUpdate: {value:"1000",required:true,validate:RED.validators.number()}
        },
        inputs:1,
        outputs:3,
        color: '#a6bbcf',        
        icon: "tanque.png",
        label: function() {
            return this.name||"tanque";
        },
        paletteLabel: function() {
            return "tanque";
        }
    });  
</script>
